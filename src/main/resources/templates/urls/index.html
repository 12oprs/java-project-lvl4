<!DOCTYPE html>
<html   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/application.html}">
    
    <section layout:fragment="header">
        Список сайтов
    </section>

    <section layout:fragment="content">
        <table class="table">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Имя</th>
                <th scope="col">Последняя проверка</th>
                <th scope="col">Код ответа</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="url : ${listUrl}" th:object="${url}">
                <td th:text="*{id}"></td>
                <td>
                    <a th:text="${url.getPath()}" 
                       th:href="@{'/urls/' + *{id}}"></a>
                </td>
                <td th:object="${url.getUrlChecks().size() == 0
                    ? '-'
                    : url.getUrlChecks().get(url.getUrlChecks().size() - 1)}"
                    th:text="${#temporals.format(createdAt, 'dd/MMM/yyyy HH:mm')}"></td> 
                <td th:text="${url.getUrlChecks().size() == 0 ? '-' : url.getUrlChecks().get(url.getUrlChecks().size() - 1).getStatusCode()}"></td>
              </tr>
            </tbody>
          </table>
    </section>  

</html>